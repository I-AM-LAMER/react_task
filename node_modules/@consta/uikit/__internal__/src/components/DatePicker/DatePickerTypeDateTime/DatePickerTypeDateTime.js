import _toConsumableArray from"@babel/runtime/helpers/toConsumableArray";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["events","dateTimeView","locale","dropdownForm","dropdownClassName","dropdownRef","currentVisibleDate","onChangeCurrentVisibleDate","multiplicityHours","multiplicityMinutes","multiplicitySeconds","renderAdditionalControls","onDropdownOpen","dropdownOpen","ignoreOutsideClicksRefs","disabled","inputRef","disableDates"];import addMonths from"date-fns/addMonths";import startOfMonth from"date-fns/startOfMonth";import React,{forwardRef,useEffect,useRef}from"react";import{useClickOutside}from"../../../hooks/useClickOutside/useClickOutside";import{useForkRef}from"../../../hooks/useForkRef";import{setRef}from"../../../utils/setRef";import{DatePickerDropdown}from"../DatePickerDropdown/DatePickerDropdown";import{DatePickerFieldTypeDateTime}from"../DatePickerFieldTypeDateTime/DatePickerFieldTypeDateTime";import{datePickerPropFormatTypeDateTime,getDropdownZIndex,getMultiplicityTime}from"../helpers";import{datePickerPropDateTimeViewDefault}from"../types";import{useCalendarVisible}from"../useCalendarVisible";import{useCurrentVisibleDate}from"../useCurrentVisibleDate";export var DatePickerTypeDateTime=forwardRef(function(a,b){var c=a.events,d=a.dateTimeView,e=void 0===d?datePickerPropDateTimeViewDefault:d,f=a.locale,g=a.dropdownForm,h=a.dropdownClassName,i=a.dropdownRef,j=a.currentVisibleDate,k=a.onChangeCurrentVisibleDate,l=a.multiplicityHours,m=a.multiplicityMinutes,n=a.multiplicitySeconds,o=a.renderAdditionalControls,p=a.onDropdownOpen,q=a.dropdownOpen,r=a.ignoreOutsideClicksRefs,s=a.disabled,t=a.inputRef,u=a.disableDates,v=_objectWithoutProperties(a,_excluded),w=getMultiplicityTime(v.format||datePickerPropFormatTypeDateTime,l,m,n),x=_slicedToArray(w,3),y=x[0],z=x[1],A=x[2],B=useRef(null),C=useRef(null),D=useRef(null),E=useCalendarVisible({dropdownOpen:q,onDropdownOpen:p,disabled:s,startRef:D}),F=_slicedToArray(E,2),G=F[0],H=F[1],I=useCurrentVisibleDate({currentVisibleDate:j,maxDate:a.maxDate,minDate:a.minDate,value:a.value,startOfUnit:startOfMonth,onChangeCurrentVisibleDate:k,calendarVisible:G}),J=_slicedToArray(I,2),K=J[0],L=J[1];return useEffect(function(){b&&setRef(b,B.current)},[b,B]),useEffect(function(){if(a.value&&"classic"===e&&K){var b=startOfMonth(a.value);return void(b.getTime()!==K.getTime()&&L(b))}if(a.value&&"classic"!==e&&K){var c=startOfMonth(a.value);c.getTime()!==K.getTime()&&c.getTime()!==addMonths(K,1).getTime()&&L(c)}},[a.value]),useClickOutside({isActive:G,ignoreClicksInsideRefs:[B,C].concat(_toConsumableArray(null!==r&&void 0!==r?r:[])),handler:H.off}),React.createElement(React.Fragment,null,React.createElement(DatePickerFieldTypeDateTime,Object.assign({},v,{ref:B,inputRef:useForkRef([D,t]),onClick:H.on,multiplicityHours:y,multiplicitySeconds:A,multiplicityMinutes:z,disabled:s})),React.createElement(DatePickerDropdown,{ref:useForkRef([i,C]),anchorRef:B,isOpen:G,value:a.value||void 0,type:"date-time",view:e,events:c,className:h,locale:f,minDate:a.minDate,maxDate:a.maxDate,currentVisibleDate:K,form:g,onChange:a.onChange,renderAdditionalControls:o,onChangeCurrentVisibleDate:L,multiplicityHours:y,multiplicitySeconds:A,multiplicityMinutes:z,zIndex:getDropdownZIndex(a.style),disableDates:u}))});
//# sourceMappingURL=DatePickerTypeDateTime.js.map