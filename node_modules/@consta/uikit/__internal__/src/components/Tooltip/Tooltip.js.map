{"version":3,"file":"Tooltip.js","names":["React","forwardRef","useMemo","useRef","useState","Transition","useForkRef","animateTimeout","cnMixPopoverAnimate","cnMixPopoverArrow","cn","Popover","Text","generateDeps","generateThemeClassNames","ThemeContext","useTheme","tooltipPropSizesDefault","cnTooltip","ARROW_SIZE","ARROW_OFFSET","Tooltip","props","ref","isOpen","size","status","onSetDirectionProp","onSetDirection","offset","style","className","children","viewportRef","otherProps","contentRef","contentForkedRef","theme","direction","setDirection","value","tooltipTheme","color","primary","accent","invert","themeClassNames","animate"],"sources":["../../../../../src/components/Tooltip/Tooltip.tsx"],"sourcesContent":["import './Tooltip.css';\n\nimport React, { forwardRef, useMemo, useRef, useState } from 'react';\nimport { Transition } from 'react-transition-group';\n\nimport { useForkRef } from '##/hooks/useForkRef';\nimport { animateTimeout, cnMixPopoverAnimate } from '##/mixs/MixPopoverAnimate';\nimport { cnMixPopoverArrow } from '##/mixs/MixPopoverArrow/MixPopoverArrow';\nimport { cn } from '##/utils/bem';\n\nimport { Direction, Popover } from '../Popover';\nimport { Text } from '../Text';\nimport {\n  generateDeps,\n  generateThemeClassNames,\n  ThemeContext,\n  useTheme,\n} from '../Theme';\nimport { TooltipProps, tooltipPropSizesDefault } from './types';\n\nconst cnTooltip = cn('Tooltip');\n\nconst ARROW_SIZE = 6;\nconst ARROW_OFFSET = 8;\n\nexport const Tooltip = forwardRef<HTMLDivElement, TooltipProps>(\n  (props, ref) => {\n    const {\n      isOpen,\n      size = tooltipPropSizesDefault,\n      status,\n      onSetDirection: onSetDirectionProp,\n      offset = 0,\n      style,\n      className,\n      children,\n      viewportRef,\n      ...otherProps\n    } = props;\n\n    const contentRef = useRef(null);\n    const contentForkedRef = useForkRef([contentRef, ref]);\n\n    const { theme } = useTheme();\n\n    const [direction, setDirection] = useState<Direction | undefined>();\n\n    const onSetDirection = (direction: Direction) => {\n      onSetDirectionProp?.(direction);\n      setDirection(direction);\n    };\n\n    const value = useMemo(() => {\n      const tooltipTheme = {\n        ...theme,\n        color: {\n          primary: status ? theme.color.accent : theme.color.invert,\n          accent: theme.color.accent,\n          invert: theme.color.primary,\n        },\n      };\n      return {\n        theme: tooltipTheme,\n        themeClassNames: generateThemeClassNames(tooltipTheme),\n      };\n    }, [generateDeps(theme), status]);\n\n    return (\n      <Transition\n        in={isOpen}\n        unmountOnExit\n        timeout={animateTimeout}\n        nodeRef={contentRef}\n      >\n        {(animate) => (\n          <ThemeContext.Provider value={value}>\n            <Popover\n              {...otherProps}\n              arrowOffset={ARROW_OFFSET + ARROW_SIZE}\n              offset={ARROW_SIZE + ARROW_OFFSET / 2 + offset}\n              onSetDirection={onSetDirection}\n              ref={contentForkedRef}\n              viewportRef={viewportRef}\n              className={cnTooltip({ status }, [\n                className,\n                cnMixPopoverAnimate({ animate }),\n              ])}\n              style={{\n                ['--popover-arrow-size' as string]: `${ARROW_SIZE}px`,\n                ['--popover-arrow-offset' as string]: `${ARROW_OFFSET}px`,\n                ...style,\n              }}\n            >\n              <div className={cnTooltip('Background')} />\n              <div\n                className={cnTooltip('Arrow', [\n                  cnMixPopoverArrow({ direction }),\n                ])}\n              />\n              <div className={cnTooltip('Content', { size })}>\n                {typeof children === 'string' ||\n                typeof children === 'number' ? (\n                  <Text view=\"primary\" size=\"m\" lineHeight=\"m\">\n                    {children}\n                  </Text>\n                ) : (\n                  children\n                )}\n              </div>\n            </Popover>\n          </ThemeContext.Provider>\n        )}\n      </Transition>\n    );\n  },\n);\n"],"mappings":"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"}