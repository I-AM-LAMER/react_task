{"version":3,"file":"useSelect.js","names":["useCallback","useEffect","useLayoutEffect","useMemo","useRef","useState","useClickOutside","useDebounce","useKeys","useMutableRef","usePrevious","useRefs","getCountedGroups","getGroups","scrollToIndex","useHoistedState","isMultipleParams","params","multiple","isNotMultipleParams","actions","setOpen","setSearch","highlightIndex","initialState","searchValue","resolvedSearchValue","isOpen","highlightedIndex","scrollToHighlighted","isOptionForCreate","Object","prototype","hasOwnProperty","call","isNotOptionForCreate","isOptionForSelectAll","useSelect","items","dropdownRef","controlRef","disabled","getItemLabel","getItemKey","searchFunction","getItemGroupKey","groups","selectAll","getGroupKey","sortGroups","getItemDisabled","onFocus","onBlur","searchValueProp","onDropdownOpen","onSearchValueChange","dropdownOpen","ignoreOutsideClicksRefs","inputRef","isFocused","setIsFocused","value","Array","isArray","setState","onSearchValueChangeRef","searchFunctionDefault","item","toLocaleLowerCase","indexOf","filteredOptions","filter","onCreate","length","label","__optionForCreate","optionForCreate","visibleItems","resultGroups","maxHighlightIndex","optionsRefs","notFound","flag","group","hasItems","allItemsSelected","el","find","getSelectedOptionIndex","index","newIsOpen","old","setResolvedSearch","prevIsOpen","indexForHighlight","newIndex","Math","min","max","currentHighlightIndex","removeValue","e","valueItem","stopPropagation","newValue","val","onChange","some","onChangeAll","parametrs","nonDisabledItems","currentGroupValues","withoutGroupValues","forEach","push","clearValue","results","ArrowUp","_","preventDefault","ArrowDown","getKeyProps","PageUp","PageDown","Home","End","Enter","getData","counter","Escape","Tab","Backspace","isActive","ignoreClicksInsideRefs","handler","current","scrollTo","top","getOptionProps","keyPrefix","onClick","onMouseEnter","active","hovered","key","getItems","groupKey","handleInputFocus","handleInputBlur","focus","handleToggleDropdown","handleInputClick","handleInputChange","target","getHandleRemoveValue"],"sources":["../../../../../../src/components/SelectComponents/useSelect/useSelect.ts"],"sourcesContent":["import React, {\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\nimport { useClickOutside } from '##/hooks/useClickOutside';\nimport { useDebounce } from '##/hooks/useDebounce';\nimport { KeyHandler, useKeys } from '##/hooks/useKeysDeprecated';\nimport { useMutableRef } from '##/hooks/useMutableRef';\nimport { usePrevious } from '##/hooks/usePrevious';\nimport { useRefs } from '##/hooks/useRefs';\nimport {\n  CountedGroup,\n  getCountedGroups,\n  getGroups,\n  SelectAllItem,\n} from '##/utils/getGroups';\n\nimport { scrollToIndex, useHoistedState } from './helpers';\n\ntype IndexForHighlight = number | ((oldIndex: number) => number);\n\ntype Group<ITEM, GROUP> = {\n  items: ITEM[];\n  key: string | number;\n  group?: GROUP;\n};\ntype GetItemGroupKey<ITEM> = (item: ITEM) => string | number | undefined;\ntype GetGroupKey<GROUP> = (item: GROUP) => string | number | undefined;\ntype SortGroups<ITEM, GROUP> = (\n  a: Group<ITEM, GROUP>,\n  b: Group<ITEM, GROUP>,\n) => number;\n\ntype OnChangeProp<ITEM, MULTIPLE extends boolean> = (\n  value: (MULTIPLE extends true ? ITEM[] : ITEM) | null,\n  props: {\n    e: React.SyntheticEvent;\n  },\n) => void;\n\ntype ValueProp<ITEM, MULTIPLE extends boolean> =\n  | (MULTIPLE extends true ? ITEM[] : ITEM)\n  | null\n  | undefined;\n\nexport type OptionForCreate = {\n  label: string;\n  __optionForCreate: boolean;\n};\n\nexport type SelectProps<ITEM, GROUP, MULTIPLE extends boolean> = {\n  getItemGroupKey?: GetItemGroupKey<ITEM> | undefined;\n  getGroupKey?: GetGroupKey<GROUP>;\n  sortGroups?: SortGroups<ITEM, GROUP>;\n  groups?: GROUP[];\n  items: ITEM[];\n  dropdownRef: React.MutableRefObject<HTMLDivElement | null>;\n  controlRef: React.MutableRefObject<HTMLDivElement | null>;\n  disabled?: boolean;\n  selectAll?: boolean;\n  getItemLabel: (item: ITEM) => string;\n  getItemKey: (item: ITEM) => string | number;\n  getItemDisabled?: (item: ITEM) => boolean | undefined;\n  searchFunction?: (item: ITEM, searchValue: string) => boolean;\n  onCreate?: (\n    label: string,\n    props: { e: React.SyntheticEvent; label: string },\n  ) => void;\n  onFocus?: React.FocusEventHandler<HTMLInputElement>;\n  onBlur?: React.FocusEventHandler<HTMLInputElement>;\n  multiple: boolean;\n  searchValue?: string;\n  onChange: OnChangeProp<ITEM, MULTIPLE>;\n  value: ValueProp<ITEM, MULTIPLE>;\n  dropdownOpen?: boolean;\n  onDropdownOpen?: (isOpen: boolean) => void;\n  onSearchValueChange?: (value: string) => void;\n  ignoreOutsideClicksRefs?: ReadonlyArray<React.RefObject<HTMLElement>>;\n};\n\nexport type OptionProps<ITEM> = {\n  index: number;\n  item: ITEM | OptionForCreate | SelectAllItem;\n  keyPrefix: string | number;\n};\n\nexport type GetOptionPropsResult = {\n  onClick: (e: React.MouseEvent) => void;\n  onMouseEnter: (e: React.MouseEvent) => void;\n  active: boolean;\n  hovered: boolean;\n  key: string | number;\n};\n\nconst isMultipleParams = <ITEM, GROUP>(\n  params: SelectProps<ITEM, GROUP, boolean>,\n): params is SelectProps<ITEM, GROUP, true> => {\n  return params.multiple;\n};\n\nconst isNotMultipleParams = <ITEM, GROUP>(\n  params: SelectProps<ITEM, GROUP, boolean>,\n): params is SelectProps<ITEM, GROUP, false> => {\n  return !params.multiple;\n};\n\nconst actions = {\n  setOpen: 'setOpen',\n  setSearch: 'setSearch',\n  highlightIndex: 'highlightIndex',\n};\n\nconst initialState = {\n  searchValue: '',\n  resolvedSearchValue: '',\n  isOpen: false,\n  highlightedIndex: 0,\n  scrollToHighlighted: false,\n};\n\nexport const isOptionForCreate = <ITEM, GROUP>(\n  params: OptionForCreate | Group<ITEM, GROUP> | ITEM,\n): params is OptionForCreate => {\n  return (\n    params && Object.prototype.hasOwnProperty.call(params, '__optionForCreate')\n  );\n};\n\nexport const isNotOptionForCreate = <ITEM, GROUP>(\n  params: OptionForCreate | Group<ITEM, GROUP>,\n): params is Group<ITEM, GROUP> => {\n  return (\n    params && !Object.prototype.hasOwnProperty.call(params, '__optionForCreate')\n  );\n};\n\nexport const isOptionForSelectAll = <ITEM>(\n  params: SelectAllItem | ITEM,\n): params is SelectAllItem => {\n  return (\n    params && Object.prototype.hasOwnProperty.call(params, '__optionSelectAll')\n  );\n};\n\nexport function useSelect<ITEM, GROUP, MULTIPLE extends boolean>(\n  params: SelectProps<ITEM, GROUP, MULTIPLE>,\n) {\n  const {\n    items,\n    dropdownRef,\n    controlRef,\n    disabled = false,\n    multiple = false,\n    getItemLabel,\n    getItemKey,\n    searchFunction,\n    getItemGroupKey,\n    groups,\n    selectAll = false,\n    getGroupKey,\n    sortGroups,\n    getItemDisabled,\n    onFocus,\n    onBlur,\n    searchValue: searchValueProp,\n    onDropdownOpen,\n    onSearchValueChange,\n    dropdownOpen,\n    ignoreOutsideClicksRefs,\n  } = params;\n\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const [isFocused, setIsFocused] = useState(false);\n\n  const value = useMemo(\n    () =>\n      (params.value &&\n        (Array.isArray(params.value) ? params.value : [params.value])) ||\n      [],\n    [params.value],\n  );\n\n  const [\n    {\n      searchValue,\n      isOpen,\n      highlightedIndex,\n      resolvedSearchValue,\n      scrollToHighlighted,\n    },\n    setState,\n  ] = useHoistedState(initialState);\n\n  const onSearchValueChangeRef = useMutableRef(onSearchValueChange);\n\n  const searchFunctionDefault = (item: ITEM, searchValue: string) =>\n    getItemLabel(item)\n      .toLocaleLowerCase()\n      .indexOf(searchValue.toLocaleLowerCase()) !== -1;\n\n  const [filteredOptions, optionForCreate] = useMemo(() => {\n    if (resolvedSearchValue && resolvedSearchValue !== '') {\n      const filteredOptions = items.filter((item) =>\n        searchFunction\n          ? searchFunction(item, resolvedSearchValue)\n          : searchFunctionDefault(item, resolvedSearchValue),\n      );\n\n      const optionForCreate: OptionForCreate = {\n        label: searchValue,\n        __optionForCreate: true,\n      };\n\n      return [\n        filteredOptions,\n        params.onCreate && !filteredOptions.length\n          ? optionForCreate\n          : undefined,\n      ] as const;\n    }\n    return [items, undefined] as const;\n  }, [items, resolvedSearchValue, params.onCreate]);\n\n  const visibleItems = useMemo(() => {\n    const resultGroups = getCountedGroups(\n      getGroups(\n        filteredOptions,\n        groups?.length ? getItemGroupKey : undefined,\n        groups,\n        getGroupKey,\n        sortGroups,\n      ),\n      isMultipleParams(params) ? params.value : [],\n      selectAll,\n      getItemKey,\n      getItemDisabled,\n    );\n\n    return optionForCreate ? [optionForCreate, ...resultGroups] : resultGroups;\n  }, [\n    value,\n    selectAll,\n    filteredOptions,\n    groups,\n    getItemGroupKey,\n    getItemDisabled,\n    getGroupKey,\n    sortGroups,\n    optionForCreate,\n  ]);\n\n  const maxHighlightIndex =\n    // количество опций\n    filteredOptions.length +\n    // кнопка для создания\n    (optionForCreate ? 1 : 0) +\n    // кнопки выбрать все\n    (selectAll ? visibleItems.length : 0);\n\n  const optionsRefs = useRefs<HTMLDivElement>(maxHighlightIndex, [isOpen]);\n\n  const notFound = useMemo(() => {\n    let flag = false;\n    if (searchValue.length > 0) {\n      flag =\n        visibleItems.filter(\n          (group) =>\n            isOptionForCreate(group) || group.items.length > 0 || group.group,\n        ).length === 0 && !params.onCreate;\n    }\n    return flag;\n  }, [visibleItems]);\n\n  const hasItems = items.length !== 0;\n\n  const allItemsSelected = useMemo(() => {\n    if (isNotMultipleParams(params)) {\n      return false;\n    }\n    if (selectAll) {\n      return (\n        items.filter((el) =>\n          value.find((item) => getItemKey(item) === getItemKey(el)),\n        ).length === items.length\n      );\n    }\n\n    return false;\n  }, [selectAll, multiple, value, items]);\n\n  const getSelectedOptionIndex = (): number => {\n    let index = 0;\n    if (value.length > 0) {\n      for (const group of visibleItems) {\n        if (isOptionForCreate(group)) {\n          index++;\n          // eslint-disable-next-line no-continue\n          continue;\n        }\n        for (const item of group.items) {\n          if (isOptionForSelectAll(item)) {\n            return index;\n          }\n          if (getItemKey(item) === getItemKey(value[0])) {\n            return index;\n          }\n          index++;\n        }\n      }\n    }\n\n    return 0;\n  };\n\n  // Actions\n\n  const setOpen = useCallback(\n    (newIsOpen: boolean) => {\n      setState(\n        (old) => ({\n          ...old,\n          isOpen: newIsOpen,\n        }),\n        actions.setOpen,\n      );\n    },\n    [setState],\n  );\n\n  const setResolvedSearch = useDebounce((value: string) => {\n    setState((old) => {\n      if (old.resolvedSearchValue === value) {\n        return old;\n      }\n      return {\n        ...old,\n        resolvedSearchValue: value,\n      };\n    }, actions.setSearch);\n  }, 300);\n\n  const setSearch = useCallback(\n    (value: string | undefined) => {\n      setState((old) => {\n        if (old.searchValue === value) {\n          return old;\n        }\n        return {\n          ...old,\n          searchValue: value || '',\n        };\n      }, actions.setSearch);\n      setResolvedSearch(value || '');\n    },\n    [setState, setResolvedSearch],\n  );\n\n  const prevIsOpen = usePrevious(isOpen);\n\n  const highlightIndex = useCallback(\n    (indexForHighlight: IndexForHighlight, scrollToHighlighted: boolean) => {\n      setState((old) => {\n        const newIndex = Math.min(\n          Math.max(\n            0,\n            typeof indexForHighlight === 'function'\n              ? indexForHighlight(old.highlightedIndex)\n              : indexForHighlight,\n          ),\n          maxHighlightIndex - 1,\n        );\n\n        if (old.highlightedIndex === newIndex) {\n          return old;\n        }\n\n        return {\n          ...old,\n          highlightedIndex: newIndex,\n          scrollToHighlighted,\n        };\n      }, actions.highlightIndex);\n    },\n    [filteredOptions, setState, optionForCreate],\n  );\n\n  useLayoutEffect(() => {\n    if (value !== null && !prevIsOpen && isOpen) {\n      const currentHighlightIndex = getSelectedOptionIndex();\n      if (filteredOptions.length > 0) {\n        scrollToIndex(currentHighlightIndex, dropdownRef, optionsRefs, () =>\n          highlightIndex(0, false),\n        );\n      }\n    }\n  });\n\n  const removeValue = (e: React.SyntheticEvent, valueItem: ITEM) => {\n    e.stopPropagation();\n    if (isMultipleParams(params)) {\n      const newValue = params.value?.filter(\n        (item) => getItemKey(item) !== getItemKey(valueItem),\n      );\n      const val = newValue?.length ? newValue : null;\n      params.onChange(val, {\n        e,\n      });\n    }\n  };\n\n  const onChange = (e: React.SyntheticEvent, item: ITEM) => {\n    if (getItemDisabled && getItemDisabled(item)) {\n      return;\n    }\n    if (isMultipleParams(params)) {\n      const newValue = value.some(\n        (value) => getItemKey(value) === getItemKey(item),\n      )\n        ? value.filter((value) => getItemKey(value) !== getItemKey(item))\n        : [...value, item];\n      const val = newValue?.length ? newValue : null;\n      params.onChange(val, { e });\n    }\n    if (isNotMultipleParams(params)) {\n      params.onChange(item, { e });\n      setOpen(false);\n      setSearch('');\n    }\n  };\n\n  const onChangeAll = (parametrs: {\n    e: React.SyntheticEvent;\n    items: ITEM[];\n  }) => {\n    const { e, items } = parametrs;\n    if (isMultipleParams(params)) {\n      const nonDisabledItems = getItemDisabled\n        ? items.filter((item) => !getItemDisabled(item))\n        : items;\n\n      const currentGroupValues: ITEM[] = [];\n      const withoutGroupValues: ITEM[] = [];\n      value.forEach((el) => {\n        if (\n          nonDisabledItems.find((item) => getItemKey(el) === getItemKey(item))\n        ) {\n          currentGroupValues.push(el);\n        } else {\n          withoutGroupValues.push(el);\n        }\n      });\n      if (currentGroupValues.length === nonDisabledItems.length) {\n        params.onChange(withoutGroupValues, { e });\n      } else {\n        const val = [...withoutGroupValues, ...nonDisabledItems];\n        params.onChange(val, {\n          e,\n        });\n      }\n    }\n  };\n\n  const onCreate = (e: React.SyntheticEvent, label: string) => {\n    params.onCreate && params.onCreate(label, { e, label });\n    setOpen(false);\n    setSearch('');\n  };\n\n  // Handlers\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\n    if (!disabled && !(!multiple && value.length > 0)) {\n      setSearch(e.target.value);\n      setOpen(true);\n    }\n  };\n\n  const handleInputClick = (): void => {\n    !disabled && setOpen(!isOpen);\n\n    if (multiple) {\n      inputRef.current?.focus();\n    }\n  };\n\n  const clearValue = (e: React.SyntheticEvent) => {\n    if (isMultipleParams(params)) {\n      const results = value?.filter((item) => getItemDisabled?.(item));\n      const val = results && results.length > 0 ? results : null;\n      params.onChange(val, {\n        e,\n      });\n    }\n    if (isNotMultipleParams(params)) {\n      params.onChange(null, { e });\n    }\n    setSearch('');\n  };\n\n  const getHandleRemoveValue = (item: ITEM) => (e: React.SyntheticEvent) =>\n    removeValue(e, item);\n\n  // Prop Getters\n\n  const ArrowUp: KeyHandler = (_, e): void => {\n    e.preventDefault();\n    !disabled && setOpen(true);\n    highlightIndex((old) => old - 1, true);\n  };\n\n  const ArrowDown: KeyHandler = (_, e): void => {\n    e.preventDefault();\n    !disabled && setOpen(true);\n    highlightIndex((old) => old + 1, true);\n  };\n\n  const Enter: KeyHandler = (_, e): void => {\n    if (isOpen) {\n      if (searchValue || filteredOptions[highlightedIndex]) {\n        e.preventDefault();\n      }\n\n      const getData = (\n        index: number,\n      ): [\n        CountedGroup<ITEM, GROUP> | undefined,\n        SelectAllItem | OptionForCreate | ITEM | undefined,\n      ] => {\n        let counter = 0;\n        for (const group of visibleItems) {\n          if (isOptionForCreate(group)) {\n            counter++;\n            return [undefined, group];\n          }\n          if (group.items.length + counter > index) {\n            return [group, group.items[index - counter]];\n          }\n          counter += group.items.length;\n        }\n        return [undefined, undefined];\n      };\n\n      const [group, item] = getData(highlightedIndex);\n\n      if (isOptionForCreate(item)) {\n        onCreate(e, item.label);\n        return;\n      }\n\n      if (isOptionForSelectAll(item)) {\n        onChangeAll({\n          e,\n          items:\n            (group?.items.filter(\n              (el) => !isOptionForSelectAll(el),\n            ) as ITEM[]) ?? [],\n        });\n        return;\n      }\n\n      if (item) {\n        onChange(e, item);\n      }\n    } else {\n      setOpen(true);\n    }\n  };\n\n  const Escape: KeyHandler = (): void => {\n    setOpen(false);\n  };\n\n  const Tab: KeyHandler = (_, e): void => {\n    if (isOpen) {\n      e.preventDefault();\n      setOpen(false);\n    }\n  };\n\n  const Backspace: KeyHandler = (_, e): void => {\n    if (searchValue) {\n      return;\n    }\n    if (multiple) {\n      removeValue(e, value[value.length - 1]);\n    } else {\n      clearValue(e);\n    }\n  };\n\n  const getKeyProps = useKeys({\n    ArrowUp,\n    ArrowDown,\n    PageUp: ArrowUp,\n    PageDown: ArrowDown,\n    Home: ArrowUp,\n    End: ArrowDown,\n    Enter,\n    Escape,\n    Tab,\n    Backspace,\n  });\n\n  const getOptionProps = ({\n    index,\n    item,\n    keyPrefix,\n  }: OptionProps<ITEM>): GetOptionPropsResult => {\n    if (isOptionForCreate(item)) {\n      return {\n        onClick: (e: React.SyntheticEvent) => {\n          onCreate(e, item.label);\n        },\n        onMouseEnter: () => {\n          highlightIndex(index, false);\n        },\n        active: false,\n        hovered: index === highlightedIndex,\n        key: `${keyPrefix}__optionForCreate`,\n      };\n    }\n    if (isOptionForSelectAll(item)) {\n      const getItems = (): ITEM[] => {\n        for (const group of visibleItems) {\n          if (isOptionForCreate(group)) {\n            break;\n          }\n          if (group.key === item.groupKey) {\n            return (\n              (group?.items.filter(\n                (el) => !isOptionForSelectAll(el),\n              ) as ITEM[]) ?? []\n            );\n          }\n        }\n        return [];\n      };\n      return {\n        onClick: (e: React.SyntheticEvent) => {\n          onChangeAll({ e, items: getItems() });\n        },\n        onMouseEnter: () => {\n          highlightIndex(index, false);\n        },\n        active: false,\n        hovered: index === highlightedIndex,\n        key: `${keyPrefix}__optionForSelectAll`,\n      };\n    }\n    const key = getItemKey(item);\n    return {\n      onClick: (e: React.SyntheticEvent) => {\n        onChange(e, item);\n      },\n      onMouseEnter: () => {\n        highlightIndex(index, false);\n      },\n      active: Boolean(value.find((item) => getItemKey(item) === key)),\n      hovered: index === highlightedIndex,\n      key: `${keyPrefix}${key}`,\n    };\n  };\n\n  useClickOutside({\n    isActive: isOpen,\n    ignoreClicksInsideRefs: [\n      dropdownRef,\n      controlRef,\n      ...(ignoreOutsideClicksRefs || []),\n    ],\n    handler: () => {\n      setOpen(false);\n    },\n  });\n\n  useEffect(() => {\n    if (disabled) {\n      setOpen(false);\n    }\n  }, [disabled]);\n\n  useEffect(() => {\n    const currentHighlightIndex = getSelectedOptionIndex();\n    highlightIndex(currentHighlightIndex, true);\n  }, [highlightIndex]);\n\n  useEffect(() => {\n    if (filteredOptions.length > 0 && scrollToHighlighted) {\n      scrollToIndex(highlightedIndex, dropdownRef, optionsRefs, () =>\n        highlightIndex(0, false),\n      );\n    }\n  }, [highlightedIndex]);\n\n  const handleInputFocus = (e: React.FocusEvent<HTMLInputElement>): void => {\n    if (!disabled) {\n      if (!isFocused) {\n        setIsFocused(true);\n      }\n      if (typeof onFocus === 'function') {\n        onFocus(e);\n      }\n    }\n  };\n\n  const handleInputBlur = (e: React.FocusEvent<HTMLInputElement>): void => {\n    if (isOpen) {\n      inputRef.current?.focus();\n      return;\n    }\n\n    if (isFocused) {\n      setIsFocused(false);\n    }\n\n    if (typeof onBlur === 'function') {\n      onBlur(e);\n    }\n  };\n\n  const handleToggleDropdown = (): void => {\n    if (isOpen) {\n      setOpen(false);\n      setIsFocused(false);\n    } else {\n      setOpen(true);\n      setIsFocused(true);\n      inputRef.current?.focus();\n    }\n  };\n\n  useEffect(() => {\n    setSearch(searchValueProp);\n  }, [searchValueProp]);\n\n  useEffect(() => {\n    dropdownRef.current?.scrollTo({ top: 0 });\n  }, [resolvedSearchValue]);\n\n  useEffect(() => {\n    onDropdownOpen?.(isOpen);\n  }, [isOpen]);\n\n  useEffect(() => {\n    onSearchValueChangeRef.current?.(searchValue);\n  }, [searchValue]);\n\n  useEffect(() => {\n    setOpen(dropdownOpen || false);\n  }, [dropdownOpen]);\n\n  return {\n    isOpen,\n    isFocused,\n    highlightedIndex,\n    visibleItems,\n    highlightIndex,\n    getOptionProps,\n    handleInputFocus,\n    handleInputBlur,\n    handleToggleDropdown,\n    handleInputClick,\n    inputRef,\n    getKeyProps,\n    handleInputChange,\n    searchValue,\n    clearValue,\n    getHandleRemoveValue,\n    notFound,\n    hasItems,\n    allItemsSelected,\n    optionsRefs,\n  };\n}\n"],"mappings":"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"}