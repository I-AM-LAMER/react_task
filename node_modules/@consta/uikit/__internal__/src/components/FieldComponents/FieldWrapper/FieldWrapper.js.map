{"version":3,"file":"FieldWrapper.js","names":["React","Text","cnMixFlex","isString","forwardRefWithAs","FieldCaption","FieldLabel","cnFieldWrapper","renderCounter","counter","Array","isArray","join","renderSide","side","spaceMap","l","m","s","xs","directionMap","top","left","FieldWrapper","props","ref","className","children","label","size","labelIcon","caption","required","status","labelPosition","labelIconRef","as","labelHtmlFor","otherProps","gap","direction","htmlFor","align","justify"],"sources":["../../../../../../src/components/FieldComponents/FieldWrapper/FieldWrapper.tsx"],"sourcesContent":["import { IconComponent } from '@consta/icons/Icon';\nimport React from 'react';\n\nimport { Text } from '##/components/Text';\nimport { cnMixFlex, MixFlexPropDirection } from '##/mixs/MixFlex';\nimport { Space } from '##/mixs/MixSpace';\nimport { isString } from '##/utils/type-guards';\nimport { forwardRefWithAs } from '##/utils/types/PropsWithAsAttributes';\n\nimport { FieldCaption } from '../FieldCaption';\nimport { FieldLabel } from '../FieldLabel';\nimport { FieldPropSize, FieldPropStatus } from '../types';\nimport { cnFieldWrapper } from './cnFieldWrapper';\n\ntype Counter = string | number | [string | number, string | number];\n\ntype FieldWrapperProps = {\n  children: React.ReactNode;\n  size?: FieldPropSize;\n  label?: string;\n  labelIcon?: IconComponent;\n  labelIconRef?: React.Ref<HTMLSpanElement>;\n  labelPosition?: 'top' | 'left';\n  labelHtmlFor?: string;\n  caption?: string;\n  required?: boolean;\n  status?: FieldPropStatus;\n  side?: React.ReactNode;\n  counter?: Counter;\n};\n\nconst renderCounter = (counter: Counter) => {\n  return (\n    <Text view=\"ghost\" size=\"xs\" lineHeight=\"m\">\n      {Array.isArray(counter) ? counter.join('/') : counter}\n    </Text>\n  );\n};\n\nconst renderSide = (side: React.ReactNode) => {\n  if (isString(side)) {\n    return <span className={cnFieldWrapper('SideText')}>{side}</span>;\n  }\n  return side;\n};\n\nconst spaceMap: Record<FieldPropSize, Space> = {\n  l: 'xs',\n  m: 'xs',\n  s: '2xl',\n  xs: '2xs',\n};\n\nconst directionMap: Record<\n  Exclude<FieldWrapperProps['labelPosition'], undefined>,\n  MixFlexPropDirection\n> = {\n  top: 'column',\n  left: 'row',\n};\n\nexport const FieldWrapper = forwardRefWithAs<FieldWrapperProps>(\n  (props, ref) => {\n    const {\n      className,\n      children,\n      label,\n      size = 'm',\n      labelIcon,\n      caption,\n      required,\n      status,\n      side,\n      counter,\n      labelPosition = 'top',\n      labelIconRef,\n      as = 'div',\n      labelHtmlFor,\n      ...otherProps\n    } = props;\n\n    const Tag = as as string;\n    const gap = spaceMap[size];\n\n    return (\n      <Tag\n        {...otherProps}\n        ref={ref}\n        className={cnFieldWrapper(null, [\n          cnMixFlex({\n            direction: directionMap[labelPosition],\n            gap: labelPosition === 'top' ? gap : 's',\n          }),\n          className,\n        ])}\n      >\n        {label && (\n          <FieldLabel\n            size={size}\n            required={required}\n            icon={labelIcon}\n            iconRef={labelIconRef}\n            {...(labelHtmlFor\n              ? {\n                  htmlFor: labelHtmlFor,\n                  as: 'label',\n                }\n              : {})}\n          >\n            {label}\n          </FieldLabel>\n        )}\n        <div\n          className={cnFieldWrapper('ControlAndCaptionWrapper', [\n            cnMixFlex({ gap, direction: 'column' }),\n          ])}\n        >\n          <div\n            className={cnFieldWrapper('ControlWrapper', [\n              cnMixFlex({ gap, direction: 'row' }),\n            ])}\n          >\n            <div className={cnFieldWrapper('Control')}>{children}</div>\n            {side && (\n              <div\n                className={cnFieldWrapper('Side', [\n                  cnMixFlex({ align: 'center', justify: 'center' }),\n                ])}\n                style={{\n                  ['--field-wrapper-side-text-size' as string]: `var(--control-text-size-${size})`,\n                  ['--field-wrapper-side-height' as string]: `var(--control-height-${size})`,\n                }}\n              >\n                {renderSide(side)}\n              </div>\n            )}\n          </div>\n          {(caption || counter) && (\n            <div\n              className={cnMixFlex({\n                direction: 'row',\n                gap,\n                justify: 'space-between',\n              })}\n            >\n              {caption && (\n                <FieldCaption status={status}>{caption}</FieldCaption>\n              )}\n              {counter && renderCounter(counter)}\n            </div>\n          )}\n        </div>\n      </Tag>\n    );\n  },\n);\n"],"mappings":"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"}