{"version":3,"file":"FieldArrayValueInlineControl.js","names":["React","forwardRef","useCallback","useEffect","useRef","useState","useComponentSize","useForkRef","useMutableRef","cnFieldArrayValueInlineControl","gapMap","l","m","s","xs","verticalPaddingMap","inputHeightMap","FieldArrayValueInlineControlRender","props","ref","className","inputRefProp","inputRef","inputMaxLength","value","inputDefaultValue","renderValue","onFocus","onBlur","autoFocus","inputTabIndex","inputAriaLabel","disabled","style","size","placeholder","onKeyDown","onKeyDownCapture","onChange","onKeyUp","onKeyUpCapture","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onWheel","otherProps","inputValue","setInputValue","onInputChangeRef","fakeInputRef","handleChange","e","target","current","inputMinWidth","width","map","length","FieldArrayValueInlineControl"],"sources":["../../../../../../src/components/FieldComponents/FieldArrayValueInlineControl/FieldArrayValueInlineControl.tsx"],"sourcesContent":["import React, {\n  forwardRef,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\n\nimport { useComponentSize } from '##/hooks/useComponentSize';\nimport { useForkRef } from '##/hooks/useForkRef';\nimport { useMutableRef } from '##/hooks/useMutableRef';\n\nimport { FieldPropSize } from '../types';\nimport { cnFieldArrayValueInlineControl } from './cnFieldArrayValueInlineControl';\nimport {\n  FieldArrayValueInlineControlComponent,\n  FieldArrayValueInlineControlProps,\n} from './types';\n\nconst gapMap: Record<FieldPropSize, string> = {\n  l: 'calc(var(--space-3xs) + var(--space-2xs))',\n  m: 'var(--space-2xs)',\n  s: 'var(--space-3xs)',\n  xs: 'var(--space-3xs)',\n};\n\nconst verticalPaddingMap: Record<FieldPropSize, string> = {\n  l: 'var(--space-xs)',\n  m: 'calc(var(--space-xs) - var(--space-3xs))',\n  s: 'var(--space-2xs)',\n  xs: 'var(--space-3xs)',\n};\n\nconst inputHeightMap: Record<FieldPropSize, string> = {\n  l: 'var(--space-2xl)',\n  m: 'calc(var(--space-2xl) - var(--space-2xs))',\n  s: 'var(--space-xl)',\n  xs: 'var(--space-l)',\n};\n\nconst FieldArrayValueInlineControlRender = (\n  props: FieldArrayValueInlineControlProps<unknown>,\n  ref: React.Ref<HTMLDivElement>,\n) => {\n  const {\n    className,\n    inputRef: inputRefProp,\n    inputMaxLength,\n    value = [],\n    inputDefaultValue,\n    renderValue,\n    onFocus,\n    onBlur,\n    autoFocus,\n    inputTabIndex,\n    inputAriaLabel,\n    disabled,\n    style,\n    size = 'm',\n    placeholder,\n    onKeyDown,\n    onKeyDownCapture,\n    onChange,\n    onKeyUp,\n    onKeyUpCapture,\n    onCopy,\n    onCopyCapture,\n    onCut,\n    onCutCapture,\n    onPaste,\n    onPasteCapture,\n    onWheel,\n    ...otherProps\n  } = props;\n\n  const [inputValue, setInputValue] = useState('');\n  const onInputChangeRef = useMutableRef(onChange);\n  const fakeInputRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const handleChange: React.ChangeEventHandler<HTMLInputElement> = useCallback(\n    (e) => {\n      setInputValue(e.target.value);\n      onInputChangeRef.current?.(e);\n    },\n    [],\n  );\n  const { width: inputMinWidth } = useComponentSize(fakeInputRef);\n\n  useEffect(() => {\n    setInputValue(inputRef.current?.value || '');\n  }, [inputRef.current?.value]);\n\n  return (\n    <div\n      {...otherProps}\n      className={cnFieldArrayValueInlineControl(null, [className])}\n      ref={ref}\n      style={{\n        ...style,\n        ['--field-array-value-inline-control-items-gap' as string]:\n          gapMap[size],\n        ['--field-array-value-inline-control-input-min-width' as string]: `${inputMinWidth}px`,\n        ['--field-array-value-inline-control-vertical-padding' as string]: `${verticalPaddingMap[size]}`,\n        ['--field-array-value-inline-control-input-height' as string]: `${inputHeightMap[size]}`,\n      }}\n    >\n      {value.map(renderValue)}\n      <input\n        className={cnFieldArrayValueInlineControl('Input')}\n        onChange={handleChange}\n        ref={useForkRef([inputRef, inputRefProp])}\n        maxLength={inputMaxLength}\n        onFocus={onFocus}\n        onBlur={onBlur}\n        // eslint-disable-next-line jsx-a11y/no-autofocus\n        autoFocus={autoFocus}\n        tabIndex={inputTabIndex}\n        aria-label={inputAriaLabel}\n        onKeyDown={onKeyDown}\n        onKeyDownCapture={onKeyDownCapture}\n        onKeyUp={onKeyUp}\n        onKeyUpCapture={onKeyUpCapture}\n        disabled={disabled}\n        type=\"text\"\n        placeholder={value.length ? undefined : placeholder}\n        onCopy={onCopy}\n        onCopyCapture={onCopyCapture}\n        onCut={onCut}\n        onCutCapture={onCutCapture}\n        onPaste={onPaste}\n        onPasteCapture={onPasteCapture}\n        onWheel={onWheel}\n        defaultValue={inputDefaultValue}\n      />\n      <div\n        ref={fakeInputRef}\n        className={cnFieldArrayValueInlineControl('HelperInputFakeElement')}\n      >\n        {inputValue}\n      </div>\n    </div>\n  );\n};\n\nexport const FieldArrayValueInlineControl = forwardRef(\n  FieldArrayValueInlineControlRender,\n) as FieldArrayValueInlineControlComponent;\n"],"mappings":"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"}