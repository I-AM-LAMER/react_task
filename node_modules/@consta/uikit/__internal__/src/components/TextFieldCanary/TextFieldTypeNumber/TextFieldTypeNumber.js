import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["className","value","defaultValue","onChange","id","name","inputRef","maxLength","disabled","size","view","form","status","onBlur","onFocus","autoFocus","placeholder","leftSide","rightSide","autoComplete","withClearButton","readOnly","type","tabIndex","ariaLabel","iconSize","onClick","incrementButtons","max","min","step","onKeyDown","onKeyDownCapture","onKeyUp","onKeyUpCapture","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onClear","onWheel"];import React,{forwardRef,useCallback,useMemo}from"react";import{FieldClearButton,FieldControlLayout,FieldCounter,FieldInput,renderSide}from"../../FieldComponents";import{useForkRef}from"../../../hooks/useForkRef";import{useKeys}from"../../../hooks/useKeys";import{useMutableRef}from"../../../hooks/useMutableRef/useMutableRef";import{useSortSteps}from"../../../hooks/useSortSteps";import{useTextField}from"../useTextField";import{cnTextFieldTypeNumber}from"./cnTextFieldTypeNumber";import{getValueByStep,stepIsActive}from"./helpers";export var TextFieldTypeNumber=forwardRef(function(a,b){var c=a.className,d=a.value,e=a.defaultValue,f=a.onChange,g=a.id,h=a.name,i=a.inputRef,j=a.maxLength,k=a.disabled,l=a.size,m=void 0===l?"m":l,n=a.view,o=void 0===n?"default":n,p=a.form,q=a.status,r=a.onBlur,s=a.onFocus,t=a.autoFocus,u=a.placeholder,v=a.leftSide,w=a.rightSide,x=a.autoComplete,y=a.withClearButton,z=a.readOnly,A=a.type,B=a.tabIndex,C=a.ariaLabel,D=a.iconSize,E=a.onClick,F=a.incrementButtons,G=a.max,H=a.min,I=a.step,J=a.onKeyDown,K=a.onKeyDownCapture,L=a.onKeyUp,M=a.onKeyUpCapture,N=a.onCopy,O=a.onCopyCapture,P=a.onCut,Q=a.onCutCapture,R=a.onPaste,S=a.onPasteCapture,T=a.onClear,U=a.onWheel,V=_objectWithoutProperties(a,_excluded),W=useTextField({onClick:E,onChange:f,onBlur:r,onFocus:s,disabled:k,onClear:T}),X=W.handleBlur,Y=W.handleChange,Z=W.handleClear,$=W.handleFocus,_=W.focused,aa=W.withValue,ba=W.ref,ca=W.inputRef,da=W.handleClick,ea=W.mutableRefs,fa=W.setWithValue,ga=useSortSteps({step:I,min:H,max:G}),ha=useMutableRef([ga,H,G,J,stepIsActive(ga,k),U]),ia=useCallback(function(a,b){var c,d;if(ca.current&&!ea.current[4]){var e=getValueByStep(ha.current[0],ca.current.value,b,ha.current[1],ha.current[2]);null===(c=(d=ea.current)[0])||void 0===c?void 0:c.call(d,e,{e:a}),ca.current.value=e,fa.on()}},[]),ja=useCallback(function(a){return ia(a,!0)},[]),ka=useCallback(function(a){return ia(a,!1)},[]),la=useKeys(useMemo(function(){return{isActive:!0,keys:{ArrowUp:function ArrowUp(a){a.preventDefault(),ha.current[4]&&ia(a,!0)},ArrowDown:function ArrowDown(a){a.preventDefault(),ha.current[4]&&ia(a,!1)}},onEvent:ha.current[3]}},[])),ma=useCallback(function(a){if(ha.current[5])ha.current[5](a);else{var b;null===(b=ca.current)||void 0===b?void 0:b.blur()}},[]);return React.createElement(FieldControlLayout,Object.assign({},V,{className:cnTextFieldTypeNumber({incrementButtons:F},[c]),form:p,status:q,size:m,leftSide:renderSide(v,m,D),rightSide:[y&&!k&&aa&&!F&&React.createElement(FieldClearButton,{size:m,onClick:Z}),F&&ha.current[4]&&React.createElement(FieldCounter,{onIncrementClick:ja,onIncrementFocus:$,onDecrementClick:ka,onDecrementFocus:$})],focused:_,view:o,ref:useForkRef([b,ba]),disabled:k,onClick:da}),React.createElement(FieldInput,{className:cnTextFieldTypeNumber("Input"),placeholder:u,autoFocus:t,autoComplete:x,onBlur:X,onChange:Y,onFocus:$,defaultValue:e||void 0,value:null===d?"":d,ref:useForkRef([i,ca]),readOnly:z,tabIndex:B,"aria-label":C,onKeyDown:la,onKeyDownCapture:K,onKeyUp:L,onKeyUpCapture:M,onWheel:ma,maxLength:j,disabled:k,type:A,max:G,min:H,id:g,name:h,onCopy:N,onCopyCapture:O,onCut:P,onCutCapture:Q,onPaste:R,onPasteCapture:S}))});
//# sourceMappingURL=TextFieldTypeNumber.js.map