{"version":3,"file":"helpers.js","names":["getValueByStepArray","steps","value","isIncrement","currentValue","length","i","getValueByStepNumber","step","min","max","minValue","maxValue","Number","isNaN","toFixed","toString","split","getValueByStep","Array","isArray","stepIsActive","disabled"],"sources":["../../../../../../src/components/TextFieldCanary/TextFieldTypeNumber/helpers.ts"],"sourcesContent":["export const getValueByStepArray = (\n  steps: number[],\n  value: string | null | undefined,\n  isIncrement: boolean,\n): number => {\n  const currentValue = Number(value ?? steps[0]);\n\n  if (currentValue < steps[0]) {\n    return steps[0];\n  }\n\n  if (currentValue > steps[steps.length - 1]) {\n    return steps[steps.length - 1];\n  }\n\n  for (let i = 0; i < steps.length; i++) {\n    if (\n      isIncrement &&\n      (currentValue === steps[i] ||\n        (steps[i] < currentValue && steps[i + 1] > currentValue))\n    ) {\n      return steps[i + 1];\n    }\n    if (\n      !isIncrement &&\n      (currentValue === steps[i] ||\n        (steps[i - 1] < currentValue && steps[i] > currentValue))\n    ) {\n      return steps[i - 1];\n    }\n  }\n\n  return 0;\n};\n\nexport const getValueByStepNumber = (\n  step: number | string,\n  value: string | null | undefined,\n  min: number | string | undefined,\n  max: number | string | undefined,\n  isIncrement: boolean,\n): number => {\n  const minValue = Number(min);\n  const maxValue = Number(max);\n  const currentValue: number =\n    (typeof value === 'string' ? Number(value) : 0) +\n    Number(step) * (isIncrement ? 1 : -1);\n\n  if (!Number.isNaN(minValue) && currentValue <= minValue) {\n    return minValue;\n  }\n  if (!Number.isNaN(maxValue) && currentValue >= maxValue) {\n    return maxValue;\n  }\n\n  return Number(\n    currentValue.toFixed(\n      Number(\n        /* Необходимо для того, чтобы избежать ситуации, когда по нажатию\n  на кнопку прибавляется число с погрешностью.\n  Здесь мы берем разрядность дробной части шага и ограничиваем\n  результирующее число этой разрядностью */\n        Number(step).toString().split('.')[1]?.length,\n      ) || 0,\n    ),\n  );\n};\n\nexport const getValueByStep = (\n  steps: number | number[],\n  value: string | null | undefined,\n  isIncrement: boolean,\n  min?: number | string,\n  max?: number | string,\n) => {\n  return (\n    Array.isArray(steps)\n      ? getValueByStepArray(steps, value, isIncrement)\n      : getValueByStepNumber(steps, value, min, max, isIncrement)\n  ).toString();\n};\n\nexport const stepIsActive = (\n  step: number | string | number[],\n  disabled: boolean = false,\n) => {\n  if (disabled) {\n    return false;\n  }\n\n  return (\n    (typeof step === 'number' && step > 0) ||\n    (typeof step === 'string' && Number(step) > 0) ||\n    (Array.isArray(step) && !!step.length)\n  );\n};\n"],"mappings":"AAAA,MAAO,IAAMA,oBAAmB,CAAG,SACjCC,CADiC,CAEjCC,CAFiC,CAGjCC,CAHiC,CAItB,CACX,GAAMC,EAAY,UAAUF,CAAV,WAAUA,CAAV,CAAUA,CAAV,CAAmBD,CAAK,CAAC,CAAD,CAAxB,CAAlB,CAEA,GAAIG,CAAY,CAAGH,CAAK,CAAC,CAAD,CAAxB,CACE,MAAOA,EAAK,CAAC,CAAD,CAAZ,CAGF,GAAIG,CAAY,CAAGH,CAAK,CAACA,CAAK,CAACI,MAAN,CAAe,CAAhB,CAAxB,CACE,MAAOJ,EAAK,CAACA,CAAK,CAACI,MAAN,CAAe,CAAhB,CAAZ,CAGF,IAAK,GAAIC,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGL,CAAK,CAACI,MAA1B,CAAkCC,CAAC,EAAnC,CAAuC,CACrC,GACEH,CAAW,GACVC,CAAY,GAAKH,CAAK,CAACK,CAAD,CAAtB,EACEL,CAAK,CAACK,CAAD,CAAL,CAAWF,CAAX,EAA2BH,CAAK,CAACK,CAAC,CAAG,CAAL,CAAL,CAAeF,CAFlC,CADb,CAKE,MAAOH,EAAK,CAACK,CAAC,CAAG,CAAL,CAAZ,CAEF,GACE,CAACH,CAAD,GACCC,CAAY,GAAKH,CAAK,CAACK,CAAD,CAAtB,EACEL,CAAK,CAACK,CAAC,CAAG,CAAL,CAAL,CAAeF,CAAf,EAA+BH,CAAK,CAACK,CAAD,CAAL,CAAWF,CAF7C,CADF,CAKE,MAAOH,EAAK,CAACK,CAAC,CAAG,CAAL,CAEf,CAED,MAAO,EACR,CAjCM,CAmCP,MAAO,IAAMC,qBAAoB,CAAG,SAClCC,CADkC,CAElCN,CAFkC,CAGlCO,CAHkC,CAIlCC,CAJkC,CAKlCP,CALkC,CAMvB,OACLQ,CAAQ,EAAUF,CADb,CAELG,CAAQ,EAAUF,CAFb,CAGLN,CAAoB,CACxB,CAAkB,QAAjB,QAAOF,EAAP,EAAmCA,CAAnC,CAA4C,CAA7C,EACA,EAAOM,CAAP,EAAgBL,CAAW,CAAG,CAAH,CAAO,CAAC,CAAnC,CALS,OAOP,CAACU,MAAM,CAACC,KAAP,CAAaH,CAAb,CAAD,EAA2BP,CAAY,EAAIO,CAPpC,CAQFA,CARE,CAUP,CAACE,MAAM,CAACC,KAAP,CAAaF,CAAb,CAAD,EAA2BR,CAAY,EAAIQ,CAVpC,CAWFA,CAXE,EAeTR,CAAY,CAACW,OAAb,CACE,YAKE,EAAOP,CAAP,EAAaQ,QAAb,GAAwBC,KAAxB,CAA8B,GAA9B,EAAmC,CAAnC,CALF,qBAKE,EAAuCZ,MALzC,GAMK,CAPP,CAUH,CA/BM,CAiCP,MAAO,IAAMa,eAAc,CAAG,SAC5BjB,CAD4B,CAE5BC,CAF4B,CAG5BC,CAH4B,CAI5BM,CAJ4B,CAK5BC,CAL4B,CAMzB,CACH,MAAO,CACLS,KAAK,CAACC,OAAN,CAAcnB,CAAd,EACID,mBAAmB,CAACC,CAAD,CAAQC,CAAR,CAAeC,CAAf,CADvB,CAEII,oBAAoB,CAACN,CAAD,CAAQC,CAAR,CAAeO,CAAf,CAAoBC,CAApB,CAAyBP,CAAzB,CAHnB,EAILa,QAJK,EAKR,CAZM,CAcP,MAAO,IAAMK,aAAY,CAAG,SAC1Bb,CAD0B,CAGvB,IADHc,EACG,oEACCA,CADD,GAMgB,QAAhB,QAAOd,EAAP,EAAmC,CAAP,CAAAA,CAA7B,EACiB,QAAhB,QAAOA,EAAP,EAA2C,CAAf,EAAOA,CADpC,EAECW,KAAK,CAACC,OAAN,CAAcZ,CAAd,GAAuB,CAAC,CAACA,CAAI,CAACH,MAR9B,CAUJ,CAbM"}