{"version":3,"file":"TextFieldTypeTextArea.js","names":["React","forwardRef","TextAreaAutoSize","cnFieldInput","FieldClearButton","FieldControlLayout","renderSide","useForkRef","useRefs","getElementWidth","useResizeObserved","cnMixScrollBar","cn","useTextField","cnTextFieldTypeTextArea","TextFieldTypeTextArea","props","componentRef","className","value","defaultValue","onChange","id","name","inputRefProp","inputRef","maxLength","disabled","size","view","form","status","onBlur","onFocus","autoFocus","placeholder","leftSide","rightSide","autoComplete","withClearButton","readOnly","type","tabIndex","ariaLabel","iconSize","onClick","resize","rows","minRows","maxRows","onKeyDown","onKeyDownCapture","onKeyUp","onKeyUpCapture","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onClear","onWheel","otherProps","handleBlur","handleChange","handleClear","handleFocus","focused","withValue","ref","handleClick","rightSlotsRefs","slotSizes","textareaProps","trackSize","reduce","a","b","filter","width","length"],"sources":["../../../../../../src/components/TextFieldCanary/TextFieldTypeTextArea/TextFieldTypeTextArea.tsx"],"sourcesContent":["import './TextFieldTypeTextArea.css';\n\nimport React, { forwardRef } from 'react';\nimport TextAreaAutoSize from 'react-textarea-autosize';\n\nimport {\n  cnFieldInput,\n  FieldClearButton,\n  FieldControlLayout,\n  renderSide,\n} from '##/components/FieldComponents';\nimport { useForkRef } from '##/hooks/useForkRef';\nimport { useRefs } from '##/hooks/useRefs';\nimport { getElementWidth, useResizeObserved } from '##/hooks/useResizeObserved';\nimport { cnMixScrollBar } from '##/mixs/MixScrollBar';\nimport { cn } from '##/utils/bem';\n\nimport { TextFieldTypeComponent } from '../types';\nimport { useTextField } from '../useTextField';\n\nexport const cnTextFieldTypeTextArea = cn('TextFieldTypeTextArea');\n\nexport const TextFieldTypeTextArea: TextFieldTypeComponent<'textarea'> =\n  forwardRef((props, componentRef) => {\n    const {\n      className,\n      value,\n      defaultValue,\n      onChange,\n      id,\n      name,\n      inputRef: inputRefProp,\n      maxLength,\n      disabled,\n      size = 'm',\n      view = 'default',\n      form,\n      status,\n      onBlur,\n      onFocus,\n      autoFocus,\n      placeholder,\n      leftSide,\n      rightSide,\n      autoComplete,\n      withClearButton,\n      readOnly,\n      type,\n      tabIndex,\n      ariaLabel,\n      iconSize,\n      onClick,\n      resize,\n      rows,\n      minRows,\n      maxRows,\n\n      // onKey props\n      onKeyDown,\n      onKeyDownCapture,\n      onKeyUp,\n      onKeyUpCapture,\n      onCopy,\n      onCopyCapture,\n      onCut,\n      onCutCapture,\n      onPaste,\n      onPasteCapture,\n      onClear,\n      onWheel,\n      ...otherProps\n    } = props;\n\n    const {\n      handleBlur,\n      handleChange,\n      handleClear,\n      handleFocus,\n      focused,\n      withValue,\n      ref,\n      inputRef,\n      handleClick,\n    } = useTextField<HTMLTextAreaElement>({\n      onClick,\n      onChange,\n      onBlur,\n      onFocus,\n      disabled,\n      onClear,\n    });\n\n    const rightSlotsRefs = useRefs<HTMLDivElement>(2, [\n      !!rightSide,\n      withClearButton && !disabled && withValue,\n    ]);\n\n    const slotSizes = useResizeObserved(rightSlotsRefs, getElementWidth);\n\n    const textareaProps = {\n      'className': cnTextFieldTypeTextArea('TextArea', [\n        cnFieldInput(),\n        cnMixScrollBar({ size: 'xs', trackSize: 'native' }),\n      ]),\n      placeholder,\n      autoComplete,\n      'onBlur': handleBlur,\n      'onChange': handleChange,\n      'onFocus': handleFocus,\n      'defaultValue': defaultValue || undefined,\n      'value': value === null ? '' : value,\n      'ref': useForkRef([inputRefProp, inputRef]),\n      readOnly,\n      tabIndex,\n      'aria-label': ariaLabel,\n      onKeyDown,\n      onKeyDownCapture,\n      onKeyUp,\n      onKeyUpCapture,\n      maxLength,\n      disabled,\n      id,\n      name,\n      autoFocus,\n      onCopy,\n      onCopyCapture,\n      onCut,\n      onCutCapture,\n      onPaste,\n      onPasteCapture,\n      onWheel,\n    };\n\n    const textAreaNoAutoSizeProps = {\n      rows,\n    };\n\n    const textAreaAutoSizeProps = {\n      minRows: minRows || rows,\n      maxRows: maxRows || rows,\n    };\n\n    return (\n      <FieldControlLayout\n        {...otherProps}\n        className={cnTextFieldTypeTextArea({ resize }, [className])}\n        form={form}\n        status={status}\n        size={size}\n        leftSide={renderSide(leftSide, size, iconSize)}\n        rightSide={[\n          withClearButton && !disabled && withValue && (\n            <FieldClearButton size={size} onClick={handleClear} />\n          ),\n          renderSide(rightSide, size, iconSize),\n        ]}\n        focused={focused}\n        view={view}\n        ref={useForkRef([componentRef, ref])}\n        disabled={disabled}\n        onClick={handleClick}\n        style={{\n          ['--text-field-textarea-slot-sizes-width' as string]: `${slotSizes.reduce(\n            (a, b) => a + b,\n          )}px`,\n          ['--text-field-textarea-slot-sizes-length' as string]:\n            slotSizes.filter((width) => !!width).length,\n        }}\n        rightSlotsRefs={rightSlotsRefs}\n      >\n        {resize === 'auto' ? (\n          <TextAreaAutoSize {...textareaProps} {...textAreaAutoSizeProps} />\n        ) : (\n          <textarea {...textareaProps} {...textAreaNoAutoSizeProps} />\n        )}\n      </FieldControlLayout>\n    );\n  });\n"],"mappings":"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"}