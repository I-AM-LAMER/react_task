{"ast":null,"code":"var _jsxFileName = \"/home/vadim/Desktop/react_task/src/pages/login-page/LoginPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport styles from './LoginPage.module.css';\nimport { Button } from '@consta/uikit/Button';\nimport { Text } from '@consta/uikit/Text';\nimport { useDispatch } from 'react-redux';\nimport { login } from '../../components/app/slices/authSlice';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction LoginPage() {\n  _s();\n  let dispatch = useDispatch();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [errors, setErrors] = useState({\n    username: '',\n    password: ''\n  });\n  const navigate = useNavigate();\n  const goToHomePage = () => {\n    navigate('/');\n  };\n  const goToServicePage = () => {\n    navigate('/services');\n  };\n  const goToLoginPage = () => {\n    navigate('/login');\n  };\n  const validatePassword = password => {\n    return password.length >= 6 && /[a-zA-Z]/.test(password);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setErrors({\n      username: '',\n      password: ''\n    });\n    if (!validatePassword(password)) {\n      setErrors(prev => ({\n        ...prev,\n        password: 'Пароль должен содержать минимум одну букву и цифру'\n      }));\n      return;\n    }\n    try {\n      const response = await fetch('https://dummyjson.com/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: username,\n          password\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        let errorMessage = 'Не удалось войти. Проверьте данные и попробуйте снова.';\n        if (errorData.errors && Array.isArray(errorData.errors)) {\n          errorMessage = errorData.errors[0].message || errorMessage;\n        }\n        throw new Error(errorMessage);\n      }\n      dispatch(login());\n      setUsername('');\n      setPassword('');\n      console.log('Авторизация успешна');\n    } catch (error) {\n      console.error('Произошла ошибка:', error);\n      handleError(error.message);\n    }\n  };\n  const handleError = error => {\n    setErrors(prev => ({\n      ...prev,\n      password: error\n    }));\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    switch (name) {\n      case 'username':\n        setUsername(value);\n        break;\n      case 'password':\n        setPassword(value);\n        break;\n      default:\n        break;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-left\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          label: \"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\",\n          onClick: goToHomePage,\n          size: \"s\",\n          className: \"header-button\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          label: \"\\u0421\\u0435\\u0440\\u0432\\u0438\\u0441\\u044B\",\n          onClick: goToServicePage,\n          size: \"s\",\n          className: \"header-button\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-right\",\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          children: \"\\u0413\\u043E\\u0441\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          label: \"\\u0412\\u043E\\u0439\\u0442\\u0438\",\n          onClick: goToLoginPage,\n          size: \"s\",\n          className: \"header-button\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.container,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: styles.form,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: styles.title,\n          children: \"\\u0412\\u0445\\u043E\\u0434 \\u0432 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0443\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"username\",\n          placeholder: \"Username\",\n          value: username,\n          onChange: handleInputChange,\n          className: styles.input1,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), errors.username && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.error,\n          children: errors.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n          value: password,\n          onChange: handleInputChange,\n          className: styles.input2,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), errors.password && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.error,\n          children: errors.password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          className: styles.button,\n          label: \"Войти\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n}\n_s(LoginPage, \"LFHIETdfOrhoMoU+r5jAqBlmlwo=\", false, function () {\n  return [useDispatch, useNavigate];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useState","styles","Button","Text","useDispatch","login","useNavigate","jsxDEV","_jsxDEV","LoginPage","_s","dispatch","username","setUsername","password","setPassword","errors","setErrors","navigate","goToHomePage","goToServicePage","goToLoginPage","validatePassword","length","test","handleSubmit","e","preventDefault","prev","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","errorMessage","Array","isArray","message","Error","console","log","error","handleError","handleInputChange","name","value","target","children","className","label","onClick","size","fileName","_jsxFileName","lineNumber","columnNumber","container","onSubmit","form","title","type","placeholder","onChange","input1","required","input2","button","_c","$RefreshReg$"],"sources":["/home/vadim/Desktop/react_task/src/pages/login-page/LoginPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport styles from './LoginPage.module.css';\nimport { Button } from '@consta/uikit/Button';\nimport { Text } from '@consta/uikit/Text';\nimport { useDispatch } from 'react-redux';\nimport { login } from '../../components/app/slices/authSlice';\n\nimport { useNavigate } from 'react-router-dom';\n\n\nfunction LoginPage() {\n  let dispatch = useDispatch(); \n\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [errors, setErrors] = useState({\n    username: '',\n    password: ''\n  });\n\n  const navigate = useNavigate();\n\n    const goToHomePage = () => {\n        navigate('/');\n    };\n\n    const goToServicePage = () => {\n        navigate('/services');\n    };\n\n    const goToLoginPage = () => {\n        navigate('/login');\n    };\n\n  const validatePassword = (password) => {\n    return password.length >= 6 && /[a-zA-Z]/.test(password);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setErrors({\n      username: '',\n      password: ''\n    });\n\n    if (!validatePassword(password)) {\n      setErrors(prev => ({ ...prev, password: 'Пароль должен содержать минимум одну букву и цифру' }));\n      return;\n    }\n\n    try {\n      const response = await fetch('https://dummyjson.com/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ username: username, password }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        let errorMessage = 'Не удалось войти. Проверьте данные и попробуйте снова.';\n        \n        if (errorData.errors && Array.isArray(errorData.errors)) {\n          errorMessage = errorData.errors[0].message || errorMessage;\n        }\n\n        throw new Error(errorMessage);\n      }\n      dispatch(login())\n\n      setUsername('');\n      setPassword('');\n      console.log('Авторизация успешна');\n    } catch (error) {\n      console.error('Произошла ошибка:', error);\n      handleError(error.message);\n    }\n  };\n\n  const handleError = (error) => {\n    setErrors(prev => ({ ...prev, password: error }));\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n\n    switch (name) {\n      case 'username':\n        setUsername(value);\n        break;\n      case 'password':\n        setPassword(value);\n        break;\n      default:\n        break;\n    }\n  };\n\n  return (\n    <div>\n      <div>\n          <div className=\"header-left\">\n              <Button label=\"Главная\" onClick={goToHomePage} size=\"s\" className=\"header-button\" />\n              <Button label=\"Сервисы\" onClick={goToServicePage} size=\"s\" className=\"header-button\" />\n          </div>\n          <div className=\"header-right\">\n            <Text>Гость</Text>\n            <Button label=\"Войти\" onClick={goToLoginPage} size=\"s\" className=\"header-button\" />\n          </div>\n        </div>\n      <div className={styles.container}>\n        <form onSubmit={handleSubmit} className={styles.form}>\n          <h2 className={styles.title}>Вход в систему</h2>\n          \n          <input\n            type=\"text\"\n            name=\"username\"\n            placeholder=\"Username\"\n            value={username}\n            onChange={handleInputChange}\n            className={styles.input1}\n            required\n          />\n          {errors.username && <p className={styles.error}>{errors.username}</p>}\n          \n          <input\n            type=\"password\"\n            name=\"password\"\n            placeholder=\"Пароль\"\n            value={password}\n            onChange={handleInputChange}\n            className={styles.input2}\n            required\n          />\n          {errors.password && <p className={styles.error}>{errors.password}</p>}\n          \n          <Button type=\"submit\" className={styles.button} label={\"Войти\"}/>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default LoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}