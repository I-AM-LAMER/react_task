{"ast":null,"code":"import React,{useState}from'react';import styles from'./LoginPage.module.css';import{Button}from'@consta/uikit/Button';import{Text}from'@consta/uikit/Text';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(props){const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[errors,setErrors]=useState({username:'',password:''});const navigate=useNavigate();const goToHomePage=()=>{navigate('/');};const goToServicePage=()=>{navigate('/services');};const goToLoginPage=()=>{navigate('/login');};const validatePassword=password=>{return password.length>=6&&/[a-zA-Z]/.test(password);};const handleSubmit=async e=>{e.preventDefault();setErrors({username:'',password:''});if(!validatePassword(password)){setErrors(prev=>({...prev,password:'Пароль должен содержать минимум одну букву и цифру'}));return;}try{const response=await fetch('https://dummyjson.com/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,password})});if(!response.ok){const errorData=await response.json();let errorMessage='Не удалось войти. Проверьте данные и попробуйте снова.';if(errorData.errors&&Array.isArray(errorData.errors)){errorMessage=errorData.errors[0].message||errorMessage;}throw new Error(errorMessage);}props.login_user();setUsername('');setPassword('');console.log('Авторизация успешна');}catch(error){console.error('Произошла ошибка:',error);handleError(error.message);}};const handleError=error=>{setErrors(prev=>({...prev,password:error}));};const handleInputChange=e=>{const{name,value}=e.target;switch(name){case'username':setUsername(value);break;case'password':setPassword(value);break;default:break;}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(Button,{label:\"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\",onClick:goToHomePage,size:\"s\",className:\"header-button\"}),/*#__PURE__*/_jsx(Button,{label:\"\\u0421\\u0435\\u0440\\u0432\\u0438\\u0441\\u044B\",onClick:goToServicePage,size:\"s\",className:\"header-button\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-right\",children:[/*#__PURE__*/_jsx(Text,{children:props.login}),/*#__PURE__*/_jsx(Button,{label:\"\\u0412\\u043E\\u0439\\u0442\\u0438\",onClick:goToLoginPage,size:\"s\",className:\"header-button\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.container,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:styles.form,children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.title,children:\"\\u0412\\u0445\\u043E\\u0434 \\u0432 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0443\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",placeholder:\"Username\",value:username,onChange:handleInputChange,className:styles.input1,required:true}),errors.username&&/*#__PURE__*/_jsx(\"p\",{className:styles.error,children:errors.username}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",value:password,onChange:handleInputChange,className:styles.input2,required:true}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:styles.error,children:errors.password}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:styles.button,label:\"Войти\"})]})})]});}export default LoginPage;","map":{"version":3,"names":["React","useState","styles","Button","Text","useNavigate","jsx","_jsx","jsxs","_jsxs","LoginPage","props","username","setUsername","password","setPassword","errors","setErrors","navigate","goToHomePage","goToServicePage","goToLoginPage","validatePassword","length","test","handleSubmit","e","preventDefault","prev","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","errorMessage","Array","isArray","message","Error","login_user","console","log","error","handleError","handleInputChange","name","value","target","children","className","label","onClick","size","login","container","onSubmit","form","title","type","placeholder","onChange","input1","required","input2","button"],"sources":["/home/vadim/Desktop/company-employee-personal-account/src/pages/login-page/LoginPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport styles from './LoginPage.module.css';\nimport { Button } from '@consta/uikit/Button';\nimport { Text } from '@consta/uikit/Text';\n\nimport { useNavigate } from 'react-router-dom';\n\n\nfunction LoginPage(props) {\n\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [errors, setErrors] = useState({\n    username: '',\n    password: ''\n  });\n\n  const navigate = useNavigate();\n\n    const goToHomePage = () => {\n        navigate('/');\n    };\n\n    const goToServicePage = () => {\n        navigate('/services');\n    };\n\n    const goToLoginPage = () => {\n        navigate('/login');\n    };\n\n  const validatePassword = (password) => {\n    return password.length >= 6 && /[a-zA-Z]/.test(password);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setErrors({\n      username: '',\n      password: ''\n    });\n\n    if (!validatePassword(password)) {\n      setErrors(prev => ({ ...prev, password: 'Пароль должен содержать минимум одну букву и цифру' }));\n      return;\n    }\n\n    try {\n      const response = await fetch('https://dummyjson.com/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ username: username, password }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        let errorMessage = 'Не удалось войти. Проверьте данные и попробуйте снова.';\n        \n        if (errorData.errors && Array.isArray(errorData.errors)) {\n          errorMessage = errorData.errors[0].message || errorMessage;\n        }\n\n        throw new Error(errorMessage);\n      }\n\n      props.login_user()\n\n      setUsername('');\n      setPassword('');\n      console.log('Авторизация успешна');\n    } catch (error) {\n      console.error('Произошла ошибка:', error);\n      handleError(error.message);\n    }\n  };\n\n  const handleError = (error) => {\n    setErrors(prev => ({ ...prev, password: error }));\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n\n    switch (name) {\n      case 'username':\n        setUsername(value);\n        break;\n      case 'password':\n        setPassword(value);\n        break;\n      default:\n        break;\n    }\n  };\n\n  return (\n    <div>\n      <div>\n          <div className=\"header-left\">\n              <Button label=\"Главная\" onClick={goToHomePage} size=\"s\" className=\"header-button\" />\n              <Button label=\"Сервисы\" onClick={goToServicePage} size=\"s\" className=\"header-button\" />\n          </div>\n          <div className=\"header-right\">\n            <Text>{props.login}</Text>\n            <Button label=\"Войти\" onClick={goToLoginPage} size=\"s\" className=\"header-button\" />\n          </div>\n        </div>\n      <div className={styles.container}>\n        <form onSubmit={handleSubmit} className={styles.form}>\n          <h2 className={styles.title}>Вход в систему</h2>\n          \n          <input\n            type=\"text\"\n            name=\"username\"\n            placeholder=\"Username\"\n            value={username}\n            onChange={handleInputChange}\n            className={styles.input1}\n            required\n          />\n          {errors.username && <p className={styles.error}>{errors.username}</p>}\n          \n          <input\n            type=\"password\"\n            name=\"password\"\n            placeholder=\"Пароль\"\n            value={password}\n            onChange={handleInputChange}\n            className={styles.input2}\n            required\n          />\n          {errors.password && <p className={styles.error}>{errors.password}</p>}\n          \n          <Button type=\"submit\" className={styles.button} label={\"Войти\"}/>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default LoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}